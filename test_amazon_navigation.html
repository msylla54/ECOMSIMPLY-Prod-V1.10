<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Navigation Amazon</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div id="test-root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Test component pour simuler la navigation
        const NavigationTest = () => {
            const [currentView, setCurrentView] = useState('home');
            const [messages, setMessages] = useState([]);

            const addMessage = (msg) => {
                setMessages(prev => [...prev, `${new Date().toLocaleTimeString()}: ${msg}`]);
            };

            const goToHome = () => {
                setCurrentView('home');
                addMessage('✅ Navigation vers HOME');
            };

            const goToDashboard = () => {
                setCurrentView('dashboard');
                addMessage('✅ Navigation vers DASHBOARD');
            };

            const goToAmazon = () => {
                setCurrentView('amazon');
                addMessage('✅ Navigation vers AMAZON');
            };

            // Simuler AmazonIntegrationPage simplifié
            const TestAmazonPage = ({ onGoToDashboard }) => (
                <div className="bg-white rounded-lg border p-6">
                    <div className="flex items-center gap-4 mb-4">
                        <button
                            onClick={onGoToDashboard}
                            className="text-gray-500 hover:text-gray-700 transition-colors px-3 py-2 border rounded"
                        >
                            ← Retour au dashboard
                        </button>
                        <h1 className="text-xl font-semibold">🛒 Amazon SP-API Test</h1>
                    </div>
                    <p>Page Amazon SP-API - Test de navigation</p>
                </div>
            );

            return (
                <div className="max-w-4xl mx-auto p-6">
                    <h1 className="text-2xl font-bold mb-6">🧪 Test Navigation Amazon SP-API</h1>
                    
                    {/* Navigation controls */}
                    <div className="bg-white rounded-lg border p-4 mb-6">
                        <h2 className="font-semibold mb-3">Navigation Controls:</h2>
                        <div className="flex gap-3">
                            <button
                                onClick={goToHome}
                                className={`px-4 py-2 rounded transition-colors ${
                                    currentView === 'home' 
                                        ? 'bg-blue-500 text-white' 
                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                }`}
                            >
                                🏠 Home
                            </button>
                            <button
                                onClick={goToDashboard}
                                className={`px-4 py-2 rounded transition-colors ${
                                    currentView === 'dashboard' 
                                        ? 'bg-blue-500 text-white' 
                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                }`}
                            >
                                📊 Dashboard
                            </button>
                            <button
                                onClick={goToAmazon}
                                className={`px-4 py-2 rounded transition-colors ${
                                    currentView === 'amazon' 
                                        ? 'bg-blue-500 text-white' 
                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                }`}
                            >
                                🛒 Amazon
                            </button>
                        </div>
                        <p className="text-sm text-gray-600 mt-2">Vue actuelle: <strong>{currentView}</strong></p>
                    </div>

                    {/* Current view */}
                    <div className="mb-6">
                        {currentView === 'home' && (
                            <div className="bg-green-50 rounded-lg border border-green-200 p-6">
                                <h2 className="text-lg font-semibold text-green-900 mb-2">🏠 Page d'accueil</h2>
                                <p className="text-green-800">Bienvenue sur la page d'accueil!</p>
                            </div>
                        )}

                        {currentView === 'dashboard' && (
                            <div className="bg-blue-50 rounded-lg border border-blue-200 p-6">
                                <h2 className="text-lg font-semibold text-blue-900 mb-2">📊 Dashboard</h2>
                                <p className="text-blue-800">Tableau de bord principal</p>
                                <button
                                    onClick={goToAmazon}
                                    className="mt-3 bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600"
                                >
                                    🛒 Accéder à Amazon
                                </button>
                            </div>
                        )}

                        {currentView === 'amazon' && (
                            <TestAmazonPage onGoToDashboard={goToDashboard} />
                        )}
                    </div>

                    {/* Messages log */}
                    <div className="bg-gray-50 rounded-lg border p-4">
                        <h3 className="font-semibold mb-3">📝 Log de Navigation:</h3>
                        <div className="space-y-1 text-sm font-mono">
                            {messages.length === 0 && (
                                <p className="text-gray-500">Aucune navigation encore...</p>
                            )}
                            {messages.map((msg, index) => (
                                <div key={index} className="text-gray-700">{msg}</div>
                            ))}
                        </div>
                    </div>

                    {/* Test result */}
                    <div className="mt-6 p-4 bg-green-100 border border-green-300 rounded-lg">
                        <h3 className="font-semibold text-green-900 mb-2">✅ Résultat du Test:</h3>
                        <p className="text-green-800 text-sm">
                            Le bouton "← Retour au dashboard" dans la page Amazon utilise maintenant <code>onGoToDashboard</code> 
                            au lieu de <code>navigate('/dashboard')</code>, ce qui est compatible avec l'architecture de l'application.
                        </p>
                    </div>
                </div>
            );
        };

        // Rendu de l'application de test
        ReactDOM.render(<NavigationTest />, document.getElementById('test-root'));
    </script>
</body>
</html>